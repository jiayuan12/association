<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.feng.dao.EquipmentMapper">
    <resultMap id="BaseResultMap" type="com.feng.entity.Equipment">
        <id column="id" property="id" />
        <result column="name" property="name" />
        <result column="need_repair" property="needRepair" />
        <result column="use_status" property="useStatus" />
        <result column="use_time" property="useTime" />
        <result column="remark" property="remark" />
        <result column="operation_status" property="operationStatus" />
        <result column="is_delete" property="isDeleted" />
        <result column="create_time" property="createTime" />
    </resultMap>
    <insert id="add" useGeneratedKeys="true" keyProperty="id" keyColumn="id" parameterType="com.feng.entity.Equipment">
        INSERT INTO
            equipment(name, need_repair, use_status, use_time, remark, operation_status, create_time)
        VALUES(#{name}, #{needRepair}, #{useStatus}, #{useTime}, #{remark}, #{operationStatus}, #{createTime})
    </insert>

    <update id="updateOperation" parameterType="com.feng.entity.Equipment">
        update equipment
        <set>
            use_time = #{useTime},
            operation_status = #{operationStatus},
        </set>
        WHERE id = #{id}
    </update>


    <update id="updateDelete" parameterType="com.feng.entity.Equipment">
        update equipment
        <set>
            <if test="isDeleted != null">
                is_deleted = #{isDeleted},
            </if>
        </set>
        WHERE id = #{id}
    </update>
    <update id="update" parameterType="com.feng.entity.Equipment">
        update equipment
        <set>
            <if test="name != null">
                name = #{name},
            </if>
            <if test="needRepair != null">
                need_repair = #{needRepair},
            </if>
            <if test="useStatus != null">
                use_status = #{useStatus},
            </if>
            <if test="remark != null">
                remark = #{remark},
            </if>
            <if test="operationStatus != null">
                operation_status = #{operationStatus},
            </if>
            <if test="createTime != null">
                create_time = #{createTime},
            </if>
        </set>
        WHERE id = #{id}
    </update>

    <delete id="deleteById" parameterType="java.lang.Integer">
        DELETE FROM equipment WHERE id = #{id}
    </delete>


    <select id="getList" resultType="com.feng.entity.Equipment" parameterType="com.feng.entity.Equipment">
        SELECT * FROM equipment WHERE is_deleted = '0'
        <if test='name != null and name != " "'>
              AND name LIKE CONCAT('%', #{name}, '%')</if>
        <if test='needRepair != null and needRepair != " "'>
             AND need_repair = #{needRepair}</if>
        <if test='useStatus != null and useStatus != " "'>
              AND use_status LIKE CONCAT('%', #{useStatus}, '%')</if>
        ORDER BY create_time DESC
    </select>
    <select id="getById" resultType="com.feng.entity.Equipment" parameterType="java.lang.Integer">
        SELECT * FROM equipment WHERE id = #{id} AND is_deleted = '0'
    </select>
</mapper>